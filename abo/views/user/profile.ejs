<%
/* global profile_fields */
%>
<% if (selectedAirline) { %>
  <form action="/<%= selectedAirline%>/update/<%= selectedUser %>" name="Profile" id="Profile" method="post">
<% } else { %>
    <form action="/update/<%= selectedUser %>" name="Profile" id="Profile" method="post">
<% } %>

<div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">


<!--BASE INFO/FAMILY-->
  <div class="panel panel-default">
    <div class="panel-heading" role="tab" id="headingOne">
      <h4 class="panel-title">
        <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
          Personal information
        </a>
      </h4>
    </div>

<div id="collapseOne" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="headingOne">
      <div class="panel-body">


    <label>First Name</label>
    <input type="text" name="firstName" class="form-control input-sm" placeholder="First Name" value="<%= profile_fields.firstName %>" required/>
    <label>Middle Name</label>
    <input type="text" name="middleName" class="form-control input-sm" placeholder="Middle Name"  value="<%= profile_fields.middleName %>" />
    <label>Last Name</label>
    <input type="text" name="lastName" class="form-control input-sm" placeholder="Last Name"  value="<%= profile_fields.lastName %>"  required/>
    <label>Gender</label>
    <%- _res = widgets.dropDownList(profile_fields, "gender", Profile.attr_gender, {"class": "form-control input-sm"}) %>
    <label>Birthday</label>
    <input type="date" name="birthday" class="form-control input-sm" placeholder="YYYY-MM-DD"  value="<%= profile_fields.birthday %>" />
    <label>Passenger Type</label>
    <%- _res = widgets.dropDownList(profile_fields, "pax_type", Profile.attr_pax_type, {"class": "form-control input-sm"}) %>
    <label>Address</label>
    <input type="text" name="address" class="form-control input-sm" placeholder="Address"  value="<%= profile_fields.address %>" />
    <label>City</label>
    <input type="text" name="city" class="form-control input-sm" placeholder="City"  value="<%= profile_fields.city %>" />
    <label>State</label>
    <input type="text" name="state" class="form-control input-sm" placeholder="State"  value="<%= profile_fields.state %>" />
    <label>Zip Code</label>
    <input type="text" name="zip_code" class="form-control input-sm" placeholder="ZipCode"  value="<%= profile_fields.zip_code %>" />
    <label>Country</label>
    <input type="text" name="country_code" class="form-control input-sm" placeholder="CountryCode"  value="<%= profile_fields.country_code %>" />

    <label>Ethnicity (Race)</label>
    <select name="ethnicity" class="form-control input-sm">
        <option value='' <% if(!profile_fields.ethnicity) {%>selected<%} %>>please choose</option>
        <option value='European'<% if(profile_fields.ethnicity == 'European') {%> selected<%} %>>European</option>
        <option value='Mexican'<% if(profile_fields.ethnicity == 'Mexican') {%> selected<%} %>>Mexican</option>
        <option value='Latin American'<% if(profile_fields.ethnicity == 'Latin American') {%> selected<%} %>>Latin American</option>
        <option value='Eastern European'<% if(profile_fields.ethnicity == 'Eastern European') {%> selected<%} %>>Eastern European</option>
        <option value='South East Asian (India, Pakistan, Bangladesh)'<% if(profile_fields.ethnicity == 'South East Asian (India, Pakistan, Bangladesh)') {%> selected<%} %>>South East Asian (India, Pakistan, Bangladesh)</option>
        <option value='Chinese'<% if(profile_fields.ethnicity == 'Chinese') {%> selected<%} %>>Chinese</option>
        <option value='Asian'<% if(profile_fields.ethnicity == 'Asian') {%> selected<%} %>>Asian</option>
        <option value='African'<% if(profile_fields.ethnicity == 'African') {%> selected<%} %>>African</option>
        <option value='South Pacific'<% if(profile_fields.ethnicity == 'South Pacific') {%> selected<%} %>>South Pacific</option>
    </select>
    <!--In Case of Emergency Notify-->
    <label>In Case of Emergency Notify</label>
    <input type="text" name="notifyContact.name" class="form-control input-sm" placeholder="In Case of Emergency Notify"  value="<%= profile_fields.notifyContact.name %>" />
    <label>Emergency Notify Phone</label>
    <input type="tel" name="notifyContact.phone" class="form-control input-sm" placeholder="Emergency Notify Phone" value="<%= profile_fields.notifyContact.phone %>"/>


    <label>Show Tiles</label>
    <input type="checkbox" name="showTiles" class="form-control input-sm" value="true" <% if(profile_fields.showTiles) {%>checked<%} %>/>


<!--Employer-->
    <fieldset style="background-image: linear-gradient(0, #f7f7ee, #FFFFFF);">
        <legend style="margin-bottom:0; font-size:18px;">Employer</legend>
        <div class="panel-body">
            <label>Company Name</label>
            <input type="text" name="employer.companyName" class="form-control input-sm" placeholder="Company Name" value="<%= profile_fields.employer.companyName %>"/>
            <label>Address</label>
            <input type="text" name="employer.address" class="form-control input-sm" placeholder="Address"  value="<%= profile_fields.employer.address %>"/>
            <label>Phone number</label>
            <input type="tel" name="employer.phone" class="form-control input-sm" placeholder="Phone number"  value="<%= profile_fields.employer.phone %>"/>
            <label>Position Held</label>
            <input type="text" name="employer.position" class="form-control input-sm" placeholder="Position Held"  value="<%= profile_fields.employer.position %>"/>
            <label>Salary Range</label>
            <select name="employer.salary" class="form-control input-sm">
                <option value='' <% if(!profile_fields.employer.salary) {%>selected<%} %>>please choose</option>
                <option value="$50K - $100K"<% if(profile_fields.employer.salary == '$50K - $100K') {%> selected<%} %>>$50K - $100K</option>
                <option value="$100K - $200K"<% if(profile_fields.employer.salary == '$100K - $200K') {%> selected<%} %>>$100K - $200K</option>
                <option value="$200K - $300K"<% if(profile_fields.employer.salary == '$200K - $300K') {%> selected<%} %>>$200K - $300K</option>
                <option value="Over $300K"<% if(profile_fields.employer.salary == 'Over $300K') {%> selected<%} %>>Over $300K</option>
            </select>
            <label>Total Household Income</label>
            <select name="employer.income" class="form-control input-sm">
                <option value='' <% if(!profile_fields.employer.income) {%>selected<%} %>>please choose</option>
                <option value="$50K - $100K"<% if(profile_fields.employer.income == '$50K - $100K') {%> selected<%} %>>$50K - $100K</option>
                <option value="$100K - $200K"<% if(profile_fields.employer.income == '$100K - $200K') {%> selected<%} %>>$100K - $200K</option>
                <option value="$200K - $300K"<% if(profile_fields.employer.income == '$200K - $300K') {%> selected<%} %>>$200K - $300K</option>
                <option value="Over $300K"<% if(profile_fields.employer.income == 'Over $300K') {%> selected<%} %>>Over $300K</option>
            </select>
        </div>
    </fieldset>

    </div>
  </div>
</div>
<!--END OF BASE INFO-->


<!--FAMILY-->

  <div class="panel panel-default">
    <div class="panel-heading" role="tab" id="headingFour">
      <h4 class="panel-title">
        <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
          Might travel with you
        </a>
      </h4>
    </div>

    <div id="collapseFour" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingFour">
      <div class="panel-body">

<!--Name(s) of Family Members who might travel with you-->
    <fieldset style="background-image: linear-gradient(0, #f7f7ee, #FFFFFF);">
      <legend style="margin-bottom:0; font-size:18px;">Travelers</legend>
        <div class="panel-body">

<%
if (profile_fields.travelWith) {
  isFirst = true
  iterator = 0
  profile_fields.travelWith.forEach(function (travelWith) { %>

      <div id="travelWith" fieldset-number="<%= iterator %>">
      <hr <% if (isFirst) { %>class="hidden"<% } %>/>
      <label>First Name</label>

      <% if (profile_fields.travelWith.length > 1) {%>
        <input class="remove-fieldset" type="button" value="remove" fieldset="travelWith" iterator="<%= iterator %>"/>
      <% } %>

      <input type="text" name="travelWith.firstName[]" class="form-control input-sm" placeholder="First Name" value="<%= travelWith.firstName %>"/>
      <label>Last Name</label>
      <input type="text" name="travelWith.lastName[]" class="form-control input-sm" placeholder="Last Name" value="<%= travelWith.lastName %>"/>
      <label>Gender</label>
      <select name="travelWith.gender[]" class="form-control input-sm">
          <option value=''<% if(!travelWith.gender) {%> selected<%} %>>please choose</option>
          <option value="Male"<% if(travelWith.gender == "Male") {%> selected<%} %>>Male</option>
          <option value="Female"<% if(travelWith.gender == "Female") {%> selected<%} %>>Female</option>
      </select>
      <label>Date of birth</label>
      <input type="date" name="travelWith.DateOfBirth[]" class="form-control input-sm" value="<%= travelWith.DateOfBirth %>"/>
      </div>
<%
    isFirst = false
    iterator++
  })
}
%>
        </div>
        <div class="panel-footer">
            <button class="btn btn-xs btn-info btn-block mymoreprofilebutton" role="button" for="travelWith"><%= __('One more')%></button>
        </div>
      </fieldset>


    </div>
  </div>
</div>
<!--END OF FAMILY-->


<div class="panel panel-default">
    <div class="panel-heading" role="tab" id="headingTwo">
      <h4 class="panel-title">
        <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
          Airlines/Programs
        </a>
      </h4>
    </div>
    <div id="collapseTwo" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo">
      <div class="panel-body">
<!--AIRLINES/PROGRAMS-->
<!--Preferred Airlines-->
    <fieldset style="background-image: linear-gradient(0, #f7f7ee, #FFFFFF);">
      <legend style="margin-bottom:0; font-size:18px;">Preferred Airlines</legend>
        <div class="panel-body">

<%
if (profile_fields.preferredAirlines) {
  isFirst = true
  iterator = 0
  profile_fields.preferredAirlines.forEach(function (preferredAirlines) { %>
    <div id="preferredAirlines" fieldset-number="<%= iterator %>">
      <hr <% if (isFirst) { %>class="hidden"<% } %>/>
      <label>Preferred Airlines type</label>

      <% if (profile_fields.preferredAirlines.length > 1) {%>
        <input class="remove-fieldset" type="button" value="remove" fieldset="preferredAirlines" iterator="<%= iterator %>"/>
      <% } %>

      <select name="preferredAirlines.travelType[]" class="form-control input-sm">
        <option value=''<% if(preferredAirlines.travelType) {%> selected<%} %>>please choose</option>
        <option value="Domestic Short Haul Trips"<% if(preferredAirlines.travelType == 'Domestic Short Haul Trips') {%> selected<%} %>>Domestic Short Haul Trips</option>
        <option value="Domestic Long Haul Flights"<% if(preferredAirlines.travelType == 'Domestic Long Haul Flights') {%> selected<%} %>>Domestic Long Haul Flights</option>
        <option value="International Flights"<% if(preferredAirlines.travelType == 'International Flights') {%> selected<%} %>>International Flights</option>
      </select>
      <label>Airline Name</label>
      <input type="text" name="preferredAirlines.airlineName[]" value="<%= preferredAirlines.airlineName %>" class="form-control input-sm" placeholder="Airline Name"/>
    </div>
<%
    isFirst = false
    iterator++
  })
}
%>

    </div>
    <div class="panel-footer">
      <button class="btn btn-xs btn-info btn-block mymoreprofilebutton" role="button" for="preferredAirlines"><%= __('One more')%></button>
    </div>
    </fieldset>

    <!--Airlines Frequent Flier Miles Programs-->
    <fieldset style="background-image: linear-gradient(0, #f7f7ee, #FFFFFF);">
      <legend style="margin-bottom:0; font-size:18px;">Airlines Frequent Flier Miles Programs</legend>
      <div class="panel-body">

<%
if (profile_fields.milesPrograms) {
  isFirst = true
  iterator = 0
  profile_fields.milesPrograms.forEach(function (milesPrograms) { %>
    <div id="milesPrograms" fieldset-number="<%= iterator %>">
      <hr <% if (isFirst) { %>class="hidden"<% } %>/>
      <label>Airline Name</label>

      <% if (profile_fields.milesPrograms.length > 1) {%>
      <input class="remove-fieldset" type="button" value="remove" fieldset="milesPrograms" iterator="<%= iterator %>"/>
      <% } %>

      <input type="text" name="milesPrograms.airlineName[]" class="form-control input-sm" placeholder="Airline Name" value="<%= milesPrograms.airlineName %>"/>
      <label>Account Number</label>
      <input type="text" name="milesPrograms.accountNumber[]" class="form-control input-sm" placeholder="Account Number" value="<%= milesPrograms.accountNumber %>"/>
      <label>Frequent Flier Miles</label>
      <input type="text" name="milesPrograms.flierMiles[]" class="form-control input-sm" placeholder="Frequent Flier Miles" value="<%= milesPrograms.flierMiles %>"/>
      <label>Expiration Date</label>
      <input type="text" name="milesPrograms.expirationDate[]" class="form-control input-sm" placeholder="Expiration Date" value="<%= milesPrograms.expirationDate %>"/>
    </div>
<%
    isFirst = false
    iterator++
  })
}
%>

      </div>
      <div class="panel-footer">
        <button class="btn btn-xs btn-info btn-block mymoreprofilebutton" role="button" for="milesPrograms"><%= __('One more')%></button>
      </div>
      </fieldset>
      <!--Airline Club Lounge Memberships-->
      <fieldset style="background-image: linear-gradient(0, #f7f7ee, #FFFFFF);">
        <legend style="margin-bottom:0; font-size:18px;">Airline Club Lounge Memberships</legend>
       <div class="panel-body">

<%
if (profile_fields.loungeMembership) {
  isFirst = true
  iterator = 0
  profile_fields.loungeMembership.forEach(function (loungeMembership) { %>
    <div id="loungeMembership" fieldset-number="<%= iterator %>">
      <hr <% if (isFirst) { %>class="hidden"<% } %>/>
      <label>Airline Name</label>

      <% if (profile_fields.loungeMembership.length > 1) {%>
      <input class="remove-fieldset" type="button" value="remove" fieldset="loungeMembership" iterator="<%= iterator %>"/>
      <% } %>

      <input type="text" name="loungeMembership.airlineName[]" class="form-control input-sm" placeholder="Airline Name" value="<%= loungeMembership.airlineName %>"/>
      <label>Club Membership Number</label>
      <input type="text" name="loungeMembership.membershipNumber[]" class="form-control input-sm" placeholder="Club Membership Number" value="<%= loungeMembership.membershipNumber %>"/>
      <label>Expiration Date</label>
      <input type="date" name="loungeMembership.expirationDate[]" class="form-control input-sm" value="<%= loungeMembership.expirationDate %>"/>
    </div>
<%
    isFirst = false
    iterator++
  })
}
%>

        </div>
        <div class="panel-footer">
            <button class="btn btn-xs btn-info btn-block mymoreprofilebutton" role="button" for="loungeMembership"><%= __('One more')%></button>
        </div>
    </fieldset>

    </div>
  </div>
</div>
<!--END OF AIRLINES/PROGRAMS-->

<style>
    body { padding-bottom: 70px; }
</style>

<div class="container">
    <nav class="navbar navbar-default navbar-fixed-bottom" style="min-height:33px !important; margin-bottom: 0 !important;">
      <div class="container-fluid">
        <button type="submit" class="btn btn-sm btn-primary btn-block" >Update</button>
      </div>
    </nav>
</div>
</form>
